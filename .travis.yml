language: c

os:
  - osx

env:
  global:
    - PYTHON_VERSION=3.7


install:
  - git clone --depth 1 git://github.com/astropy/ci-helpers.git
  - source ci-helpers/travis/setup_conda.sh

script:

  - pip install git+https://github.com/pyinstaller/pyinstaller.git
  - pip install PyQt5 PyQtWebEngine
  - pip install voila ipywidgets bqplot ipyvuetify git+https://github.com/mariobuikhuizen/voila-vuetify.git@plots numpy scipy astropy

  - pip freeze

  - pyinstaller voila_demo.spec

  - python fix_osx.py dist/voila_demo.app
  - dist/voila_demo.app/Contents/MacOS/voila_demo --nonblocking
